# 前端开发路线图

## 项目概述

**技术栈**: React 19 + TypeScript + Vite 7  
**当前版本**: v0.1.0-alpha  
**总体完成度**: ~22%

---

## 开发阶段

### Phase 1: 基础设施完善 (1-2周) - 完成度: 80%

#### 1.1 项目初始化 ✅
- [x] Vite 7 + React 19 项目搭建
- [x] TypeScript 配置
- [x] ESLint 配置
- [x] 基础目录结构

#### 1.2 样式系统 🚧 (优先级: P0)
- [ ] Tailwind CSS 配置
- [ ] 全局样式变量
- [ ] 响应式断点定义
- [ ] 暗色主题支持 (可选)

**预估时间**: 1天

#### 1.3 开发工具 🚧
- [x] ESLint 规则配置
- [ ] Prettier 配置 (可选)
- [ ] Git hooks (husky + lint-staged)
- [ ] VS Code 推荐配置

**预估时间**: 0.5天

---

### Phase 2: 核心架构 (2周) - 完成度: 20%

#### 2.1 路由系统 🚧 (优先级: P0)
- [x] React Router 基础配置
- [x] 基础页面路由 (HomePage, NovelListPage, etc.)
- [ ] 嵌套路由重构
  - [ ] `/novels/:id` - 小说详情
  - [ ] `/novels/:id/characters` - 角色管理
  - [ ] `/novels/:id/scenes` - 场景管理
  - [ ] `/novels/:id/generate` - 生成控制
  - [ ] `/novels/:id/export` - 导出功能
- [ ] 路由守卫和权限控制
- [ ] 404 页面

**预估时间**: 2天

#### 2.2 API 服务层 🚧 (优先级: P0)
- [x] Axios 基础配置
- [ ] API 拦截器 (请求/响应)
- [ ] 错误处理机制
- [ ] 重试逻辑
- [ ] 取消请求支持
- [ ] API 服务模块:
  - [ ] novelApi.ts
  - [ ] characterApi.ts
  - [ ] sceneApi.ts
  - [ ] mediaApi.ts
  - [ ] generationApi.ts

**预估时间**: 3天

#### 2.3 TypeScript 类型定义 🚧 (优先级: P0)
- [ ] types/novel.ts - 小说相关类型
- [ ] types/character.ts - 角色类型
- [ ] types/scene.ts - 场景类型
- [ ] types/media.ts - 媒体类型
- [ ] types/api.ts - API 响应类型
- [ ] types/common.ts - 通用类型

**预估时间**: 2天

#### 2.4 状态管理 ❌ (优先级: P0)
- [ ] 选择状态管理方案 (推荐 Zustand)
- [ ] novelStore - 小说状态
- [ ] characterStore - 角色状态
- [ ] generationStore - 生成状态
- [ ] uiStore - UI 状态

**预估时间**: 2天

---

### Phase 3: 通用组件库 (1周) - 完成度: 70%

#### 3.1 基础 UI 组件 ✅ (优先级: P1)
- [x] Button - 按钮组件
- [x] Input - 输入框组件
- [x] Card - 卡片组件
- [x] Modal - 模态框组件
- [x] LoadingSpinner - 加载指示器
- [x] FloatingAvatar - 浮动头像
- [ ] Toast - 消息提示
- [ ] Dropdown - 下拉菜单
- [ ] Tabs - 标签页
- [ ] Progress - 进度条

**预估时间**: 3天

#### 3.2 表单组件 ❌ (优先级: P1)
- [ ] Form - 表单容器
- [ ] TextArea - 文本域
- [ ] Select - 选择器
- [ ] Checkbox - 复选框
- [ ] Radio - 单选框
- [ ] FileUpload - 文件上传

**预估时间**: 2天

#### 3.3 布局组件 🚧 (优先级: P0)
- [x] Layout - 主布局
- [ ] Sidebar - 侧边栏
- [ ] Header - 页头
- [ ] Footer - 页脚
- [ ] Container - 容器组件

**预估时间**: 1天

---

### Phase 4: 小说管理功能 (2周) - 完成度: 5%

#### 4.1 小说上传 ❌ (优先级: P0)
- [ ] 文件上传组件
- [ ] 拖拽上传支持
- [ ] 上传进度显示
- [ ] 格式验证 (txt, doc, docx)
- [ ] 文件大小限制

**预估时间**: 3天

#### 4.2 小说列表 🚧 (优先级: P0)
- [x] NovelListPage 基础页面
- [ ] 小说卡片展示
- [ ] 搜索和筛选
- [ ] 分页加载
- [ ] 排序功能

**预估时间**: 2天

#### 4.3 小说详情 ❌ (优先级: P0)
- [ ] 小说元数据展示
- [ ] 章节列表
- [ ] 章节阅读器
- [ ] 解析状态显示
- [ ] 编辑和删除操作

**预估时间**: 3天

---

### Phase 5: 角色管理功能 (2周) - 完成度: 5%

#### 5.1 角色提取 ❌ (优先级: P0)
- [ ] 自动角色提取展示
- [ ] 角色信息编辑
- [ ] 角色描述优化
- [ ] 角色关系图谱 (可选)

**预估时间**: 3天

#### 5.2 角色一致性 ❌ (优先级: P0)
- [ ] 参考图生成触发
- [ ] 参考图预览和管理
- [ ] 参考图编辑和重新生成
- [ ] 多风格参考图支持

**预估时间**: 4天

#### 5.3 角色列表 🚧 (优先级: P1)
- [x] CharacterPage 基础页面
- [ ] 角色卡片展示
- [ ] 角色搜索
- [ ] 批量操作

**预估时间**: 2天

---

### Phase 6: 场景生成功能 (2周) - 完成度: 5%

#### 6.1 场景分割 ❌ (优先级: P0)
- [ ] 场景列表展示
- [ ] 场景详情查看
- [ ] 场景编辑和调整
- [ ] 对话提取展示

**预估时间**: 3天

#### 6.2 生成控制 🚧 (优先级: P0)
- [x] GenerationPage 基础页面
- [ ] 批量生成配置
- [ ] 单场景生成
- [ ] 生成参数配置 (风格、比例等)

**预估时间**: 3天

#### 6.3 生成进度 ❌ (优先级: P0)
- [ ] 实时进度显示
- [ ] WebSocket 连接
- [ ] 队列状态展示
- [ ] 错误处理和重试

**预估时间**: 3天

---

### Phase 7: 媒体管理 (1周) - 完成度: 0%

#### 7.1 图片管理 ❌ (优先级: P1)
- [ ] 图片预览组件
- [ ] 图片缩放和查看
- [ ] 图片下载
- [ ] 图片编辑 (可选)

**预估时间**: 2天

#### 7.2 视频管理 ❌ (优先级: P1)
- [ ] 视频播放器
- [ ] 视频预览
- [ ] 视频下载

**预估时间**: 2天

#### 7.3 媒体库 ❌ (优先级: P2)
- [ ] 媒体资源浏览
- [ ] 标签和分类
- [ ] 批量管理

**预估时间**: 2天

---

### Phase 8: 导出功能 (1周) - 完成度: 5%

#### 8.1 导出配置 🚧 (优先级: P1)
- [x] ExportPage 基础页面
- [ ] 导出格式选择 (MP4, GIF, 图片序列)
- [ ] 导出质量配置
- [ ] 水印配置 (可选)

**预估时间**: 2天

#### 8.2 导出执行 ❌ (优先级: P1)
- [ ] 导出任务创建
- [ ] 导出进度跟踪
- [ ] 导出结果下载

**预估时间**: 2天

---

### Phase 9: 用户体验优化 (1周) - 完成度: 10%

#### 9.1 交互优化 ❌ (优先级: P2)
- [ ] Loading 状态优化
- [ ] 骨架屏
- [ ] 空状态页面
- [ ] 错误边界
- [ ] 操作反馈 (Toast)

**预估时间**: 2天

#### 9.2 响应式设计 ❌ (优先级: P2)
- [ ] 移动端适配
- [ ] 平板适配
- [ ] 桌面端优化

**预估时间**: 2天

#### 9.3 无障碍访问 ❌ (优先级: P3)
- [ ] 键盘导航
- [ ] 屏幕阅读器支持
- [ ] ARIA 标签
- [ ] 焦点管理

**预估时间**: 2天

---

### Phase 10: 测试 (持续进行) - 完成度: 0%

#### 10.1 测试框架 ❌ (优先级: P0)
- [ ] Vitest 配置
- [ ] React Testing Library 配置
- [ ] 测试工具函数
- [ ] Mock 数据

**预估时间**: 1天

#### 10.2 单元测试 ❌ (优先级: P1)
- [ ] 组件测试 (目标覆盖率 > 70%)
- [ ] Hooks 测试
- [ ] 工具函数测试

**预估时间**: 持续进行

#### 10.3 集成测试 ❌ (优先级: P2)
- [ ] API 集成测试
- [ ] 页面流程测试

**预估时间**: 3天

#### 10.4 E2E 测试 ❌ (优先级: P3)
- [ ] Playwright 配置
- [ ] 关键路径测试

**预估时间**: 3天

---

### Phase 11: 性能优化 (1周) - 完成度: 0%

#### 11.1 代码优化 ❌ (优先级: P2)
- [ ] 代码分割 (React.lazy)
- [ ] 路由懒加载
- [ ] 组件懒加载
- [ ] Bundle 分析和优化

**预估时间**: 2天

#### 11.2 渲染优化 ❌ (优先级: P2)
- [ ] React.memo 优化
- [ ] useMemo / useCallback
- [ ] 虚拟列表 (长列表)
- [ ] 图片懒加载

**预估时间**: 2天

#### 11.3 缓存策略 ❌ (优先级: P2)
- [ ] API 响应缓存
- [ ] 本地存储策略
- [ ] Service Worker (PWA)

**预估时间**: 2天

---

### Phase 12: 文档和规范 (持续进行) - 完成度: 30%

#### 12.1 开发文档 🚧 (优先级: P1)
- [x] CLAUDE.md - Claude Code 指南
- [x] README.md - 项目介绍
- [x] ROADMAP.md - 开发路线图
- [ ] CONTRIBUTING.md - 贡献指南
- [ ] CHANGELOG.md - 变更日志

**预估时间**: 2天

#### 12.2 组件文档 ❌ (优先级: P2)
- [ ] Storybook 配置
- [ ] 组件示例
- [ ] API 文档

**预估时间**: 3天

---

### Phase 13: 部署和 CI/CD (1周) - 完成度: 0%

#### 13.1 构建优化 ❌ (优先级: P1)
- [ ] 生产环境构建配置
- [ ] 环境变量管理
- [ ] 资源压缩和优化

**预估时间**: 1天

#### 13.2 CI/CD ❌ (优先级: P1)
- [ ] GitHub Actions 配置
- [ ] 自动化测试
- [ ] 自动化部署
- [ ] 代码质量检查

**预估时间**: 2天

---

## 里程碑

### M1: MVP (最小可行产品) - 目标: 4周后
- [ ] 完成 Phase 1-3 (基础设施 + 核心架构 + 通用组件)
- [ ] 完成 Phase 4 (小说上传和列表)
- [ ] 完成基础 API 集成
- [ ] 可以上传和查看小说

### M2: 核心功能完整 - 目标: 8周后
- [ ] 完成 Phase 5-6 (角色管理 + 场景生成)
- [ ] 完成生成进度跟踪
- [ ] 实现角色一致性功能
- [ ] 可以完成完整的生成流程

### M3: 功能完善 - 目标: 12周后
- [ ] 完成 Phase 7-9 (媒体管理 + 导出 + UX 优化)
- [ ] 测试覆盖率 > 50%
- [ ] 性能优化完成
- [ ] 可以导出和分享内容

### M4: 生产就绪 - 目标: 16周后
- [ ] 完成所有 Phase
- [ ] 测试覆盖率 > 70%
- [ ] 文档完善
- [ ] CI/CD 完整
- [ ] 可以发布正式版本

---

## 技术债务

### 高优先级
1. **样式系统确定**: 尽快选择 Tailwind CSS 或其他方案
2. **TypeScript 类型定义**: 避免使用 any,建立完整类型体系
3. **测试框架配置**: 尽早引入,避免后期补测试成本
4. **状态管理方案**: 确定 Zustand 或 Context API

### 中优先级
1. **表单处理**: 引入 react-hook-form + zod
2. **错误边界**: 实现全局错误捕获
3. **环境变量**: 完善 .env 配置

### 低优先级
1. **国际化**: i18n 支持
2. **主题系统**: 暗色模式
3. **PWA**: 离线支持

---

## 风险评估

### 技术风险
1. **React 19 兼容性**: React 19 较新,生态可能不完全兼容
   - **缓解措施**: 谨慎选择第三方库,优先选择支持 React 19 的
   
2. **AI 服务不稳定**: Gemini/Sora2 API 可能不稳定
   - **缓解措施**: 实现重试机制和错误处理
   
3. **实时通信**: WebSocket 连接管理复杂
   - **缓解措施**: 考虑使用轮询作为备选方案

### UX 风险
1. **生成时间过长**: AI 生成可能需要较长时间
   - **缓解措施**: 提供清晰的进度反馈和预估时间
   
2. **大文件上传**: 小说文件可能较大
   - **缓解措施**: 分片上传,显示上传进度

---

## 开发规范

### 命名规范
- 组件: PascalCase (NovelCard, CharacterList)
- 文件: PascalCase.tsx for components, camelCase.ts for others
- 变量/函数: camelCase
- 常量: UPPER_SNAKE_CASE
- 类型/接口: PascalCase with I prefix for interfaces (INovel)

### 文件组织
- 一个组件一个文件
- 相关组件放在同一目录
- 使用 index.ts 进行统一导出

### Git 规范
- 遵循 Conventional Commits
- feat: 新功能
- fix: 修复
- docs: 文档
- style: 格式
- refactor: 重构
- test: 测试
- chore: 构建/工具

---

## 依赖管理

### 核心依赖 (已安装)
- react: ^19.1.1
- react-dom: ^19.1.1
- react-router-dom: ^7.9.4
- react-icons: ^5.5.0

### 待添加依赖
```bash
# 样式
npm install -D tailwindcss postcss autoprefixer

# 状态管理
npm install zustand

# 表单
npm install react-hook-form zod @hookform/resolvers

# HTTP 客户端
npm install axios

# 工具库
npm install date-fns clsx

# 测试
npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom

# 代码质量
npm install -D husky lint-staged
```

---

**路线图版本**: v1.0  
**最后更新**: 2025-10-24  
**维护者**: AI-Motion Team
